#
# Root Embed.toml - Multi-board configuration for workspace
#
# Usage:
#   cargo embed --release                    # Uses default (feather-stm32f405)
#   cargo embed --chip feather --release     # Explicitly select feather
#   cargo embed --chip microbit --release    # Select micro:bit
#   cargo embed --chip stm32f3 --release     # Select STM32F3 Discovery
#
# You can override settings by creating `Embed.local.toml` or `.embed.local.toml`
# in this directory (not tracked by git).
#

# Default configuration - Feather STM32F405
[default.general]
chip = "STM32F405RGTx"
# connect_under_reset = true

[default.probe]
protocol = "Swd"  # Force SWD (the Feather STM32F405 doesn't support full JTAG)
# speed = 1000  # (kHz) Uncomment to reduce speed for improved signal stability

[default.rtt]
enabled = true
up_channels = [
  { channel = 0, name = "defmt", format = "Defmt" },
]

[default.gdb]
enabled = false

# Feather STM32F405 board configuration
[feather.general]
chip = "STM32F405RGTx"
# connect_under_reset = true

[feather.probe]
protocol = "Swd"
# speed = 1000

[feather.rtt]
enabled = true
up_channels = [
  { channel = 0, name = "defmt", format = "Defmt" },
]

[feather.gdb]
enabled = false

# BBC micro:bit v2 (nRF52833) configuration
[microbit.general]
chip = "nRF52833_xxAA"

[microbit.probe]
protocol = "Swd"

[microbit.rtt]
enabled = true
up_channels = [
  { channel = 0, name = "defmt", format = "Defmt" },
]

[microbit.gdb]
enabled = false

# STM32F3 Discovery board configuration
[stm32f3.general]
chip = "STM32F303VCTx"

[stm32f3.probe]
protocol = "Swd"

[stm32f3.rtt]
enabled = true
up_channels = [
  { channel = 0, name = "defmt", format = "Defmt" },
]

[stm32f3.gdb]
enabled = false
