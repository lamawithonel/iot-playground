# Mosquitto MQTT Broker Configuration for TLS Testing

# Listener for non-encrypted MQTT (port 1883)
listener 1883
protocol mqtt
allow_anonymous true

# Listener for encrypted MQTT over TLS (port 8883)
listener 8883
protocol mqtt
allow_anonymous true

# TLS configuration
cafile /mosquitto/certs/ca.crt
certfile /mosquitto/certs/server.crt
keyfile /mosquitto/certs/server.key

# TLS version - support TLS 1.2 and 1.3
tls_version tlsv1.2

# Cipher suites - support both AES-128 and AES-256 for testing
# This allows testing with embedded-tls which only supports AES-128-GCM-SHA256
ciphers ECDHE-RSA-AES256-GCM-SHA384:ECDHE-RSA-AES128-GCM-SHA256:AES256-GCM-SHA384:AES128-GCM-SHA256

# Require certificate from clients (set to false for testing)
require_certificate false

# Logging
log_dest stdout
log_type error
log_type warning
log_type notice
log_type information
log_timestamp true

# Persistence
persistence true
persistence_location /mosquitto/data/

# Connection settings
max_connections -1
